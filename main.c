#include "wfc.h"

#include <input.h>
#include <print.h>
#include <vdp.h>

const u8 tileset_patterns[NUM_TILES][8] =
{
    {0x00, 0x00, 0x01, 0x0F, 0x1F, 0x19, 0x18, 0x3C},
    {0x3C, 0x18, 0x19, 0x1F, 0x0F, 0x01, 0x00, 0x00},
    {0x00, 0x00, 0x80, 0xF0, 0xF8, 0x98, 0x18, 0x3C},
    {0x3C, 0x18, 0x98, 0xF8, 0xF0, 0x80, 0x00, 0x00},
    {0x3C, 0x18, 0x19, 0x1F, 0x1F, 0x19, 0x18, 0x3C},
    {0x3C, 0x18, 0x98, 0xF8, 0xF8, 0x98, 0x18, 0x3C},
    {0x00, 0x00, 0x81, 0xFF, 0xFF, 0x99, 0x18, 0x3C},
    {0x3C, 0x18, 0x99, 0xFF, 0xFF, 0x81, 0x00, 0x00},
    {0x3C, 0x18, 0x99, 0xFF, 0xFF, 0x99, 0x18, 0x3C},
    {0x3C, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x3C},
    {0x00, 0x00, 0x81, 0xFF, 0xFF, 0x81, 0x00, 0x00},
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
    {0x3C, 0x18, 0x18, 0x3C, 0x3C, 0x18, 0x00, 0x00},
    {0x00, 0x00, 0x18, 0x3C, 0x3C, 0x18, 0x18, 0x3C},
    {0x00, 0x00, 0x98, 0xFC, 0xFC, 0x98, 0x00, 0x00},
    {0x00, 0x00, 0x19, 0x3F, 0x3F, 0x19, 0x00, 0x00}
};

const u8 tileset_colors[NUM_TILES][8] =
{
    {0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE},
    {0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE},
    {0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE},
    {0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE},
    {0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE},
    {0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE},
    {0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE},
    {0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE},
    {0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE},
    {0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE},
    {0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE},
    {0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE},
    {0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE},
    {0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE},
    {0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE},
    {0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE, 0xCE}
};

void main()
{
	VDP_SetMode(VDP_MODE_SCREEN2);
	VDP_ClearVRAM();

	VDP_LoadPattern_GM2((u8*)tileset_patterns, NUM_TILES, 0);
	VDP_LoadColor_GM2((u8*)tileset_colors, NUM_TILES, 0);
	VDP_FillScreen_GM2(0xD7);

	wave_t wave;
    wave_reset(&wave);
	wave_collapse(&wave);

	while (!Keyboard_IsKeyPressed(KEY_ESC))
	{
        // Wait for ESC key to exit
    }
}
